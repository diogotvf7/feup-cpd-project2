
# Assignment 2

## Server Setup

### Compilation
Navigate to the `src/server` directory and compile the `Server` class:
```bash
javac Server.java
```

### Execution
Start the server using the following command:
```bash
java Server <Port> <Mode>
```
- `<Port>`: The port number where the server will be initialized.
- `<Mode>`: Server mode (`0` for unranked, `1` for ranked).

## Client Connection

### Compilation
Navigate to the `src/server` directory and compile the `Client` class:
```bash
javac Client.java
```

### Execution
Connect a client to the server using the following command:
```bash
java Client <HOST> <PORT>
```
- `<HOST>`: Use `localhost`.
- `<PORT>`: Must match the port number specified when starting the server.

To utilize the multiplayer functionality, open two different terminals and create two users.

## Database

The database consists of CSV files stored in the `/tables` directory.

Passwords are encrypted using a key from the `.env` file for enhanced security.

User tokens are generated by concatenating the user ID with a random value and expire after a set date.

## Authentication

After establishing a client-server connection, you will be prompted to either login or register.

### Login
If you have already registered, log in using the following command:
```bash
/login <user> <password>
```
- `<user>`: Your username.
- `<password>`: The password associated with your username.

### Register
If you do not have an account, register using the following command:
```bash
/register <user> <password> <password>
```
- `<user>`: Choose a username.
- `<password>`: Enter your desired password, repeated twice for confirmation.

## Fault Tolerance

### Database

The server saves the state of the game in the CSV file.

### Connections

The client class initially stores the socket. After authentication, it generates a token and fills in missing data such as rank, elo, and username.

When a game starts, the current game is stored on the client. In the event of a client disconnect, the client can reconnect using the token since it is stored in the database.

## Server Modes

### Simple Mode

In this mode, users are sequentially grouped into game instances. The first 'n' users from the waiting queue are allocated to the first game, and this process continues, filling subsequent games until no more slots are available.

### Ranked Mode

This mode prioritizes matching players of similar ranks. If players in the queue have significantly different ranks, the game creation is delayed until more suitable players join. Over time, to avoid long waits, the system slightly broadens the acceptable rank difference with each matchmaking attempt.
